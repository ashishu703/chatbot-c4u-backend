CREATE TABLE `facebook_profiles` (
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `uid` VARCHAR(50) NOT NULL,
    `account_id` VARCHAR(50) NOT NULL,
    `name` VARCHAR(50) NOT NULL,
    `token` TEXT NOT NULL,
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
) ENGINE = MyISAM;



CREATE TABLE `facebook_pages` (
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `uid` VARCHAR(50) NOT NULL,
    `name` VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL,
    `page_id` VARCHAR(50) NOT NULL,
    `account_id` VARCHAR(50) NOT NULL,
    `token` TEXT NOT NULL,
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
) ENGINE = MyISAM;


ALTER TABLE `chats` ADD `type` ENUM('WHATSAPP','MESSENGER','INSTAGRAM','') NOT NULL DEFAULT 'WHATSAPP' AFTER `uid`;

ALTER TABLE `chats` ADD `recipient` VARCHAR(50) NULL AFTER `last_message`;

CREATE TABLE `instagram_accounts` (
    `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
    `uid` VARCHAR(50) NOT NULL,
    `instagram_user_id` VARCHAR(50) NOT NULL,
    `account_id` VARCHAR(50) NOT NULL,
    `name` VARCHAR(50) NOT NULL,
    `username` VARCHAR(50) NOT NULL,
    `avatar` VARCHAR(200),
    `token` TEXT NOT NULL,
    `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    `updated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
) ENGINE = MyISAM;


ALTER TABLE `web_public` ADD `facebook_client_id` VARCHAR(100) NULL AFTER `fb_login_active`, ADD `facebook_client_secret` VARCHAR(100) NULL AFTER `facebook_client_id`, ADD `facebook_graph_version` VARCHAR(5) NULL AFTER `facebook_client_secret`, ADD `facebook_auth_scopes` TEXT NULL AFTER `facebook_default_graph_version`, ADD `meta_webhook_verifcation_key` TEXT NULL AFTER `facebook_auth_scopes`, ADD `instagram_client_id` VARCHAR(100) NULL AFTER `meta_webhook_verifcation_key`, ADD `instagram_client_secret` VARCHAR(100) NULL AFTER `instagram_client_id`, ADD `instagram_graph_version` VARCHAR(5) NULL AFTER `instagram_client_secret`, ADD `instagram_auth_scopes` TEXT NULL AFTER `instagram_graph_version`;
